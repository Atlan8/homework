<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>九宫格算法</title>
    <style type="text/css">
        body,div,ol,ul,li,dl,dt,dd,h1,h2,h3,h4,h5,h6,p,form,fieldset,legend,input{ margin:0; padding:0;}

        h1,h2,h3,h4,h5,h6{ font-size:100%; font-weight:normal;}

        ol,ul{ list-style:none;}
        img,fieldset{ border:0 none; display:block;}

        div{

        }
        #top{
            padding: 20px;
        }

        #bottom{
            position: relative;
        }
        .box{
            width: 220px;
            height: 400px;
            margin: 0 15px 15px 0;
            background-color: #e8e8e8;
        }
        .box img{
            width: 220px;

        }
        .box p:last-child{
            color: orange;
        }
    </style>
</head>
<body>
<div><div id="top">
    <button>3列</button>
    <button>4列</button>
    <button>5列</button>
</div>
<div id="bottom">
    <div class="box">
        <img src="images/images01/2.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/3.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/4.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/8.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/11.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/12.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/12.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/16.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/17.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/20.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/21.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/22.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/23.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/24.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
    <div class="box">
        <img src="images/images01/25.jpg" alt=""/>
        <p>因为遇见你</p>
        <p>孙怡邓论牵手演绎刺绣传奇</p>
    </div>
</div></div>
<script>
    /*
    * 九宫格算法：
    * 1. 利用控件的索引号计算出控件所在的行号和列号
    * 2. 利用列号计算出控件的left距离
    * 3. 利用行号计算出控件的top距离
    * */

    window.onload = function()
    {
        //1. 获取需要的标签
        var btns = document.getElementById('top').children;
        var bottom = document.getElementById("bottom");

        //2. 监听按钮的点击
        btns[0].onclick = function()
        {
            /*//2.1 定义变量
            var boxWidth = 220, boxHeight = 400, marginXY = 15, allCols = 3;

            //将上面的变量作用到盒子中，通过遍历实现
            for(var i = 0; i < bottom.children.length; i++)
            {
                //2.2.1 求出当前盒子所在的行和列
                var row = parseInt(i / allCols); //行
                var col = parseInt(i % allCols); //列

                //console.log("当前盒子在第" + row + "行，第" + col + "列");
                //2.2.2 盒子的定位
                var currentBox = bottom.children[i];
                currentBox.style.position = 'absolute';
                currentBox.style.left = col * (boxWidth + marginXY) + 'px';
                currentBox.style.top = row * (boxHeight + marginXY) + 'px';
            }*/
            j_flex(3, bottom);
        };
        btns[1].onclick = function()
        {
            j_flex(4, bottom);
        };
        btns[2].onclick = function()
        {
            j_flex(5, bottom);
        };
    };

        //3 优化
        function j_flex(allCols, parentNode) {
            //2.1 定义变量
            var boxWidth = 220, boxHeight = 400, marginXY = 15;

            //将上面的变量作用到盒子中，通过遍历实现
            for (var i = 0; i < parentNode.children.length; i++) {
                //2.2.1 求出当前盒子所在的行和列
                var row = parseInt(i / allCols); //行
                var col = parseInt(i % allCols); //列

                //console.log("当前盒子在第" + row + "行，第" + col + "列");
                //2.2.2 盒子的定位
                var currentBox = parentNode.children[i];
                currentBox.style.position = 'absolute';
                currentBox.style.left = col * (boxWidth + marginXY) + 'px';
                currentBox.style.top = row * (boxHeight + marginXY) + 'px';

            }
        }
</script>
</body>
</html>